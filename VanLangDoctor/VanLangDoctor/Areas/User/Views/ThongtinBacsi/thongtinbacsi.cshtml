@model VanLangDoctor.Models.BACSI

@{
    ViewBag.Title = "Thông tin bác sĩ";
    var comments = (IEnumerable<VanLangDoctor.Models.DANH_GIA>)ViewBag.Comments;
    var ratingSum = ViewBag.RatingSum;
    var ratingCount = ViewBag.RatingCount;

    decimal rating = 0;
    if (ratingCount > 0)
    {
        rating = (ratingSum / ratingCount);
    }
    var totalRating = decimal.Parse(rating.ToString());
}

<head>
    <link href="~/Content/assets-dr/css/bootstrap/bootstrap-grid.css" rel="stylesheet" />
    <link href="~/Content/asset-dr-inf/plugins/icofont/icofont.min.css" rel="stylesheet" />
    <link href="~/Content/asset-dr-inf/plugins/slick-carousel/slick/slick.css" rel="stylesheet" />
    <link href="~/Content/asset-dr-inf/plugins/slick-carousel/slick/slick-theme.css" rel="stylesheet" />
    <link href="~/Content/asset-dr-inf/css/style.css" rel="stylesheet" />

    <title>Thông tin về bác sĩ</title>
    <link href="~/Content/asset-dr-inf/css/nicepage.css" rel="stylesheet" />
    <link href="~/Content/asset-dr-inf/css/ViewDetailDoctor.css" rel="stylesheet" />
    <script src="~/Content/asset-dr-inf/js/jquery.js"></script>
    <script src="~/Content/asset-dr-inf/js/nicepage.js"></script>
    <meta name="generator" content="Nicepage 4.6.4, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700,700i|PT+Sans+Caption:400,700">
    <link href="~/Content/Site.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/Content/assets-news/css/bootstrap.min.css">
</head>

<body class="u-body u-xl-mode">
    <section class="skrollable skrollable-between u-align-center u-clearfix u-gradient u-section-1" id="sec-f353">
        <div class="u-clearfix u-sheet u-sheet-1">
            <h1 class="u-text u-text-body-alt-color u-text-default u-title u-text-1">
                <b>Chuyên khoa</b>
            </h1>
            <p class="u-large-text u-text u-text-body-alt-color u-text-variant u-text-2">@Model.KHOA.TEN_KHOA</p>
            <a href="~/trang-chu/bac-si" class="u-btn u-btn-round u-button-style u-palette-2-base u-radius-50 u-btn-1">Các bác sĩ khác</a>
        </div>
    </section>
    <section class="u-align-center u-clearfix u-image u-section-2" id="carousel_78dc" data-image-width="1980" data-image-height="1320">
        <div class="u-clearfix u-sheet u-valign-bottom-sm u-valign-bottom-xs u-sheet-1">
            <h2 class="u-custom-font u-text u-text-font u-text-1">Thông tin về bác sĩ</h2>
            <div class="u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
                <div class="u-gutter-0 u-layout">
                    <div class="u-layout-row">
                        <div class="u-align-center-sm u-align-center-xs u-align-left-lg u-align-left-md u-align-left-xl u-container-style u-layout-cell u-palette-1-light-3 u-size-20 u-layout-cell-1">
                            <div class="u-container-layout u-container-layout-1">
                                <h4 class="u-custom-font u-text u-text-font u-text-2">Thông tin chi tiết</h4>
                                <p class="u-text u-text-3">
                                    <span style="font-weight: 700;">
                                        <span style="font-size: 1.25rem;">Tên</span>
                                        <span style="font-size: 1.25rem;">
                                            :
                                            @if (Model.GIOI_TINH.ToString().ToLower() == "nam")
                                            {
                                                <span style="font-weight: 400;">BS. @Model.TEN_BACSI</span>
                                            }
                                            else
                                            { <span style="font-weight: 400;">BS. @Model.TEN_BACSI</span>}

                                        </span>
                                    </span>
                                    <br>
                                    <span style="font-weight: 700;">
                                        Ngày sinh: <span style="font-weight: 400;">@Html.FormatValue(Model.NGAYSINH_BS, "{0:d}")</span>
                                    </span>
                                    <span style="font-weight: 700;">
                                        <br>Nghề nghiệp: <span style="font-weight: 400;">@Model.NGHE_NGHIEP</span>
                                    </span>
                                    <br>
                                    <span style="font-weight: 700;">Chuyên </span>
                                    <span style="font-weight: 700;">khoa</span>: @Model.KHOA.TEN_KHOA<br>
                                    <span style="font-weight: 700;">Kinh </span>
                                    <span style="font-weight: 700;">nghiệm </span>: @Model.KINH_NGHIEM năm<br>
                                    @*<span style="font-weight: 700;">Ngày </span>
                                        <span style="font-weight: 700;">trực </span>: @Html.FormatValue(Model.NGAY_TRUC, "{0:d}")*@
                                </p>
                            </div>
                        </div>
                        <div class="u-align-center-sm u-align-center-xs u-align-left-lg u-align-left-md u-align-left-xl u-container-style u-layout-cell u-palette-1-light-2 u-size-22 u-layout-cell-2">
                            <div class="u-container-layout u-container-layout-2">
                                <h4 class="u-custom-font u-text u-text-font u-text-4">Tiêu chí</h4>
                                <p class="u-text u-text-5"> Là một bác sĩ, mọi người sẽ tin tưởng bạn, tâm sự với bạn và đánh giá cao những nỗ lực của bạn. Bạn có thể làm rất nhiều điều tuyệt vời cho mọi người nếu như bạn không để hệ thống này làm bạn thất vọng</p>
                            </div>
                        </div>
                        <div class="u-container-style u-layout-cell u-palette-1-light-1 u-size-18 u-layout-cell-3">
                            <div class="u-container-layout u-container-layout-3">
                                <div class="u-image u-image-circle u-preserve-proportions u-image-1" style="background-image: url(@Url.Action("Picture", new {Model.ID_BACSI}))" alt="" data-image-width="700" data-image-height="774"></div>
                                @if (Model.GIOI_TINH.ToString().ToLower() == "nam")
                                {
                                    <h3 class="u-align-center u-custom-font u-text u-text-6">BS. @Model.TEN_BACSI</h3>
                                }
                                else
                                {
                                    <h3 class="u-align-center u-custom-font u-text u-text-6">BS. @Model.TEN_BACSI</h3>
                                }
                                <p class="u-align-left u-custom-font u-font-pt-sans u-text u-text-7">
                                    Thông tin liên hệ<br>&nbsp;
                                    <span class="u-file-icon u-icon u-text-white">
                                        <img src="~/Content/asset-dr-inf/images/5.png" alt="">
                                    </span>&nbsp; :
                                    <a class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-hover-palette-2-light-1 u-text-white u-btn-1" href="tel:@Model.SDT">@Model.SDT</a>
                                    <br>&nbsp;
                                    <span class="u-file-icon u-icon u-text-white">
                                        <img src="~/Content/asset-dr-inf/images/6.png" alt="">
                                    </span>&nbsp; :
                                    <a href="mailto:@Model.AspNetUser.Email" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-hover-palette-2-light-1 u-text-white u-btn-1">@Model.AspNetUser.Email</a>

                                </p>
                                <a href="mailto:@Model.AspNetUser.Email" class="u-active-palette-2-light-2 u-border-3 u-border-active-white u-border-hover-white u-border-white u-btn u-btn-round u-button-style u-hover-palette-2-light-2 u-none u-radius-50 u-text-active-white u-text-black u-text-hover-white u-btn-3">Liên hệ</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <hr />
    <div class="weekly2-news-area weekly2-pading gray-bg">
        <div class="container">
            <div class="weekly2-wrapper">
                <!-- section Tittle -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="section-tittle mb-30">
                            <h3>Đánh giá về bác sĩ</h3>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="weekly2-news-active dot-style d-flex dot-style">
                            @foreach (var c in comments)
                            {
                                <div id="itemFilter" class="weekly2-single">
                                    <div class="weekly2-img">
                                        <div class="weekly2-img">
                                            @c.AspNetUser.UserName
                                        </div>
                                        @for (var i = 1; i <= c.RATING; i++)
                                        {
                                            <span class="starGlowN"></span>
                                        }
                                        @for (var i = (c.RATING + 1); i <= 5; i++)
                                        {
                                            <span class="starFadeN"></span>
                                        }
                                    </div>
                                    <div id="myTemp" class="weekly2-caption">
                                        <h5>@Html.Raw(c.NHAN_XET.Replace("\n", "<br />"))</h5>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <dl>
        <dd>
            <div class="commentBox">
                @using (Html.BeginForm("DanhGia", "ThongtinBacsi", FormMethod.Post, new { onsubmit = "return SubmitComment()" }))
                {
                    @Html.AntiForgeryToken()
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-md-4 control-label">
                                Đánh giá của bạn <span style="font-weight:normal;">(1 sao là rất tệ, 5 sao là rất tốt)</span>
                            </label>
                            <div class="col-md-7">
                                <div onmouseout="CRateSelected()">
                                    <span class="starFade" id="Rate1" onclick="CRate(1)" onmouseover="CRateOver(1)" onmouseout="CRateOut(1)"></span><span class="starFade" id="Rate2" onclick="CRate(2)" onmouseover="CRateOver(2)" onmouseout="CRateOut(2)"></span><span class="starFade" id="Rate3" onclick="CRate(3)" onmouseover="CRateOver(3)" onmouseout="CRateOut(3)"></span><span class="starFade" id="Rate4" onclick="CRate(4)" onmouseover="CRateOver(4)" onmouseout="CRateOut(4)"></span><span class="starFade" id="Rate5" onclick="CRate(5)" onmouseover="CRateOver(5)" onmouseout="CRateOut(5)"></span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-12">
                                <textarea name="NHAN_XET" id="Comment" required rows="5" style="width:100%;" class="form-control"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-12">
                                <input type="hidden" name="ID_BENHNHAN" value="33" />
                                <input type="hidden" name="ID_USER" value="@ViewBag.ID_USER" />
                                <input type="hidden" name="ID_BACSI" value="@ViewBag.ID_BACSI" />
                                <input type="hidden" name="RATING" id="Rating" value="0" />
                                <input type="submit" id="btnRegister" name="btnRegister" value="Submit Comment" class="btn btn-warning" />
                            </div>
                        </div>
                    </div>
                }
            </div>
        </dd>

    </dl>
    <script>
        function SubmitComment() {
            if ($("#Rating").val() == "0") {
                alert("Vui lòng chọn mức độ đánh giá về bác sĩ này");
                return false;
            }
            else {
                return true;
            }
        }

        function CRate(r) {
            $("#Rating").val(r);
            for (var i = 1; i <= r; i++) {
                $("#Rate" + i).attr('class', 'starGlow');
            }
            // unselect remaining
            for (var i = r + 1; i <= 5; i++) {
                $("#Rate" + i).attr('class', 'starFade');
            }
        }

        function CRateOver(r) {
            for (var i = 1; i <= r; i++) {
                $("#Rate" + i).attr('class', 'starGlow');
            }
        }

        function CRateOut(r) {
            for (var i = 1; i <= r; i++) {
                $("#Rate" + i).attr('class', 'starFade');
            }
        }

        function CRateSelected() {
            var setRating = $("#Rating").val();
            for (var i = 1; i <= setRating; i++) {
                $("#Rate" + i).attr('class', 'starGlow');
            }
        }
    </script>
    <!-- Footer auto scroll -->
    <script src="~/Content/assets-news/js/slick.min.js"></script>
    <script src="~/Content/assets-news/js/main.js"></script>
</body>