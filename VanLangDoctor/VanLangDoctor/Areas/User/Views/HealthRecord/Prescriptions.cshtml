@model VanLangDoctor.Models.DON_THUOC


@{
    ViewBag.Title = "Prescriptions";
    Layout = "~/Areas/User/Views/Shared/_Layout.cshtml";
}



@* Prescription *@
<link rel="stylesheet" href="~/Content/assets-HealthRecord/nicepage.css" media="screen">
<link rel="stylesheet" href="~/Content/assets-HealthRecord/Sổ-khám-bệnh.css" media="screen">
<link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>

<script class="u-script" type="text/javascript" src="~/Content/assets-HealthRecord/jquery.js" defer=""></script>
<script class="u-script" type="text/javascript" src="~/Content/assets-HealthRecord/nicepage.js" defer=""></script>

<link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
<link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald:200,300,400,500,600,700">

<style>
    .site-dialog {
        border: 1px solid;
    }

    #details_pre {
        height: 530px;
        width: 800px;
    }

    .imgage {
        display: block;
        margin-left: auto;
        margin-right: auto;
        border-radius: 20%;
        -moz-border-radius: 20%;
        -webkit-border-radius: 20%;
    }
    .cancel {
        background-color: #2f89fc;
    }
        .cancel::after .cancel:hover {
            background-color: #2f90fe;
        }
</style>


<body class="u-body u-xl-mode">
    <section class="u-clearfix u-image u-section-1" id="carousel_aa97">
        <div class="u-clearfix u-sheet u-sheet-1">
            <div class="u-clearfix u-layout-wrap u-layout-wrap-1">
                <div class="u-layout">
                    <div class="u-layout-row">
                        <div class="u-container-style u-layout-cell u-left-cell u-size-30 u-layout-cell-1" src="">
                            <div class="u-container-layout u-valign-bottom">
                                <img class="u-image u-image-contain u-image-1" src="~/Content/assets-HealthRecord/images/6158b984e0fd04ce18f390ab2b6eab25.png">
                            </div>
                        </div>
                        <div class="u-align-left u-container-style u-layout-cell u-right-cell u-size-30 u-layout-cell-2">
                            <div class="u-container-layout u-container-layout-2">
                                <h1 class="u-custom-font u-font-oswald u-text u-text-body-alt-color u-text-1">Sổ khám bệnh</h1>
                                <p class="u-custom-font u-font-oswald u-text u-text-body-alt-color u-text-2">Sức khỏe của bạn là ưu tiên hàng đầu của chúng tôi</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="u-align-center u-clearfix u-section-2" id="carousel_7070">
        <div class="u-clearfix u-sheet u-sheet-1">
            <div class="u-border-10 u-border-palette-1-base u-container-style u-group u-group-1">
                <div class="u-container-layout u-container-layout-1">
                    <h2 class="u-align-center u-custom-font u-font-oswald u-text u-text-1">Chi tiết đơn thuốc</h2>
                    <div class="u-expanded-width u-form u-form-1">
                        <form action="#" method="POST" class="u-clearfix u-form-spacing-10 u-form-vertical u-inner-form" style="padding: 10px" source="email" name="form">
                            <div class="u-form-group u-form-name">
                                <label for="name-31bd" class="u-label">Họ và tên</label>
                                <input type="text" value="@Model.SO_KHAM_BENH.BENH_NHAN.TEN_BN" id="name-31bd" name="name" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" readonly>
                            </div>
                            <div class="u-form-date u-form-group u-form-partition-factor-3">
                                <label for="email-31bd" class="u-label">Tuổi</label>
                                <input type="number" value="@(DateTime.Now.Year - Model.SO_KHAM_BENH.BENH_NHAN.NGAY_SINH.Value.Year)" id="email-31bd" name="email" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" readonly>
                            </div>
                            <div class="u-form-group u-form-partition-factor-3 u-form-group-3">
                                <label for="text-a4cc" class="u-label">Giới tính</label>
                                <input type="text" value="@Model.SO_KHAM_BENH.BENH_NHAN.GIOI_TINH" id="text-a4cc" name="text-1" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" readonly>
                            </div>
                            <div class="u-form-group u-form-partition-factor-3 u-form-phone u-form-group-4">
                                <label for="text-ea5d" class="u-label">Địa chỉ</label>
                                <input type="tel" value="@Model.SO_KHAM_BENH.BENH_NHAN.DIA_CHI" id="text-ea5d" name="text" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" readonly>
                            </div>
                            <div class="u-form-email u-form-group u-form-group-5">
                                <label for="text-a9ab" class="u-label">Ngày tạo</label>
                                <input type="date" value="@Model.NGAY_LAP.Value.ToString("yyyy-MM-dd")" id="text-a9ab" name="text-3" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" readonly>
                            </div>
                        </form>
                        <div class="form-row">
                            <h2 for="medicine" style="text-align:center">Thuốc điều trị</h2>
                            <table id="Medicine" class="table table-hover">
                                <thead>
                                    <tr>
                                        <th scope="col" hidden></th>
                                        <th scope="col">#</th>
                                        <th scope="col">Tên thuốc</th>
                                        <th scope="col">Số lượng</th>
                                        <th scope="col"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < Model.CHI_TIET_DON_THUOC.Count; i++)
                                    {
                                        <tr>
                                            <td style="display: none">@Model.CHI_TIET_DON_THUOC.ElementAt(i).ID_THUOC</td>
                                            <td>@(i + 1)</td>
                                            <td>@Model.CHI_TIET_DON_THUOC.ElementAt(i).THUOC.TEN_THUOC</td>
                                            <td>@Model.CHI_TIET_DON_THUOC.ElementAt(i).SO_LUONG</td>
                                            <td><button class="bx bx-detail prescription"></button></td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                        <a href="~/tai-khoan/ho-so-benh-an-@Model.SO_KHAM_BENH.BENH_NHAN.ID_BENH_NHAN" type="button" class="btn py-3 px-5 cancel">Quay lại</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    @foreach (var chiTietDonThuoc in Model.CHI_TIET_DON_THUOC)
    {
        <dialog class="site-dialog details_prescription_@chiTietDonThuoc.ID_THUOC">
            <form id="details_pre">
                <div class="form-outline mb-4">
                    <img src="@Url.Action("Picture", "Thuoc", new { chiTietDonThuoc.THUOC.ID_THUOC })" class="img-circle imgage" width="304" height="236">
                </div>

                <div class="form-outline mb-4">
                    <label for="name">Tên thuốc</label>
                    <input id="name_medicine" type="text" value="@chiTietDonThuoc.THUOC.TEN_THUOC" class="form-control" readonly />
                </div>

                <div class="form-outline mb-4">
                    <label for="name">Mô tả</label>
                    <textarea class="form-control" rows="4" readonly>@chiTietDonThuoc.THUOC.MO_TA</textarea>
                </div>
                <br />
                <div class="form-outline mb-4">
                    <a href="#" class="btn cancel" role="button" aria-pressed="true">Quay lại</a>
                </div>
            </form>


        </dialog>
    }

    <script>
        (function ($) {
            'use strict';
            var $accountDelete = $('.prescription');
            $accountDelete.on('click', function () {
                let idThuoc = $(this).parent().parent().children('td').eq(0).text();
                $(`.details_prescription_${idThuoc}`)[0].showModal();
            });
            $('.cancel').on('click', function () {
                $(this).parent().parent().parent()[0].close();
            });
        })(jQuery);
    </script>
</body>